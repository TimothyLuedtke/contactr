<!-- Edit page from Company Schema -->

<!DOCTYPE html>
<html lang="en">

<head>
  <%- include('partials/__head') %>
</head>

<!-- Header / Navbar -->
<header class="navbar-space"><%- include('partials/__header') %></header>

<body class="">
  <div class="fb-box-shadow rounded-corners p-2 p-sm-4 text-center text-md-start">
    <!-- Edit Company -->
    <div class="container">
      <div class="col col-12">
        <h2 class="text-center display-3 m-4"><%= company.companyName %></h2>
        <form action="/companies/<%= company._id %>?_method=DELETE" class="text-center" method="POST"
          onsubmit="return confirm(`Are you sure you want to delete <%= company.companyName %>?`)">
          <button class="btn btn-sm btn-outline-danger" type="submit">
            Delete
          </button>
        </form>
      </div>
    </div>
    <hr />

    <form action="/companies/<%= company._id %>?_method=PUT" method="POST">
      <!-- Job Description -->
      <div class="container align-items-center">
        <div class="row text-start">
          <div class="col col-12">
            <h3 class="text-center m-4">Company Info</h3>
          </div>
          <div class="row gap-3 mb-3">
            <div class="col-md">
              <label class="d-block" for="companyName">Company: <span style="color: red">*</span></label>
              <input class="w-100 form-control" type="text" placeholder="Company Name" id="companyName"
                name="companyName" value="<%= company.companyName %>" />
            </div>
            <div class="col-md">
              <label for="dateAdded">Date Added:</label>
              <input class="w-100 form-control" type="date" placeholder="Date Added" id="dateAdded" name="dateAdded"
                value="<%= company.dateAdded?.toISOString().slice(0, 10) %>" />
            </div>
            <div class="col-md">
              <label for="url">Company Website:</label>
              <input class="w-100 form-control" type="text" placeholder="URL" id="url" name="url"
                value="<%= company.url %>" />
            </div>
          </div>

          <div class="row gap-3 mb-3">
            <div class="col-md">
              <label for="role">Job Title:</label>
              <input class="w-100 form-control" type="text" placeholder="Role/Position" id="role" name="role"
                value="<%= company.role %>" />
            </div>
            <div class="col-md">
              <label for="roleURL">Job Post URL:</label>
              <input class="w-100 form-control" type="text" placeholder="Position URL" id="roleURL" name="roleURL"
                value="<%= company.roleURL %>" />
            </div>
            <div class="col-md">
              <label for="position">Position Type:</label>
              <select class="w-100 form-select" aria-label="select position type" name="position" id="position">
                <option selected value="<%= company.position %>">
                  <%= company.position %>
                </option>
                <option value="Full-time Local">Full-time Local</option>
                <option value="Full-time Remote">Full-time Remote</option>
                <option value="Full-time Hybrid">Full-time Hybrid</option>
                <option value="Part-time Local">Part-time Local</option>
                <option value="Part-time Remote">Part-time Remote</option>
                <option value="Part-time Hybrid">Part-time Hybrid</option>
                <option value="Contract">Contract</option>
                <option value="Internship">Internship</option>
                <option value="Seasonal">Seasonal</option>
                <option value="Temporary">Temporary</option>
              </select>
            </div>
          </div>
          <div class="row gap-3 mb-3">
            <div class="col-md">
              <label for="source">Source:</label>
              <input class="w-100 form-control" type="text" placeholder="Job Board, Other" id="source" name="source"
                value="<%= company.source %>" />
            </div>
            <div class="col-md"></div>
            <div class="col-md"></div>
          </div>
        </div>
      </div>
      <hr />
      <!-- Point of Contact -->
      <div class="container align-items-center">
        <div class="row text-start">
          <div class="col col-12">
            <h3 class="text-center m-4">Point of Contact</h3>
          </div>
          <div class="row gap-3 mb-3">
            <div class="col-md">
              <label for="pocName">Name of Contact:</label>
              <input class="w-100 form-control" type="text" placeholder="Name of Contact" id="pocName" name="pocName"
                value="<%= company.pointOfContact.name %>" />
            </div>
            <div class=" col-md">
              <label for="pocPosition">Job Title of Contact:</label>
              <input class="w-100 form-control" type="text" placeholder="Position of Contact" id="pocPosition"
                name="pocPosition" value="<%= company.pointOfContact.position %>" />
            </div>
            <div class=" col-md">
              <label for="pocEmail">Email of Contact:</label>
              <input class="w-100 form-control" type="email" placeholder="Email of Contact" id="pocEmail"
                name="pocEmail" value="<%= company.pointOfContact.email %>" />
            </div>
          </div>
        </div>
      </div>

      <hr />
      <!-- Application -->

      <!-- Check Boxes -->
      <div class="container align-items-center">
        <div class="row text-center">
          <div class="col col-12">
            <h3 class="text-center m-4">Job Application</h3>
          </div>
          <div class="row gap-3 mb-3">
            <div class="col">
              <input class="form-check-input" type="checkbox" placeholder="Applied?" id="applied" name="applied"
                value="yes" <%= company.application.applied && 'checked' %> />
              <label class="form-check-label" for="applied">Have I Applied?</label>
            </div>
          </div>
          <div class="row gap-3 mb-3">
            <div class="col">
              <input class="form-check-input" type="checkbox" id="coffeeChat" name="coffeeChat" value="yes"
                <%= company.application.coffeeChat && 'checked' %> />
              <label class="form-check-label" for="coffeeChat">Have I done a Coffee Chat?</label>
            </div>
          </div>
          <div class="row gap-3 mb-3">
            <div class="col">
              <input class="form-check-input" type="checkbox" id="saidThanks" name="saidThanks" value="yes"
                <%= company.application.saidThanks && 'checked' %> />
              <label class="form-check-label" for="saidThanks">Have I sent a thank you note?</label>
            </div>
          </div>
        </div>

        <!-- Date Inputs -->
        <div class="row text-start">
          <!-- date row 1 -->
          <div class="row gap-3 mb-3">
            <div class="col-sm">
              <label for="applyDate">Application Submission Date:</label>
              <input type="date" class="form-control" placeholder="Date you applied" id="applyDate" name="applyDate"
                value="<%= company.application.applyDate?.toISOString().slice(0, 10) %>" />
            </div>

            <div class="col-sm">
              <label for="coffeeChatDate">Coffee Chat Date:</label>
              <input type="date" class="form-control" id="coffeeChatDate" name="coffeeChatDate"
                value="<%= company.application.coffeeChatDate?.toISOString().slice(0, 10) %>" />
            </div>
          </div>
          <!-- date row 2 -->
          <div class="row gap-3 mb-3">
            <div class="col-sm">
              <label for="followUpDate">Follow-Up Date:</label>
              <input type="date" class="form-control" id="followUpDate" name="followUpDate"
                value="<%= company.application.followUpDate?.toISOString().slice(0, 10) %>" />
            </div>
            <div class="col-sm">
              <label for="interviewDate">Interview Date:</label>
              <input type="date" class="form-control" id="interviewDate" name="interviewDate"
                value="<%= company.application.interviewDate?.toISOString().slice(0, 10) %>" />
            </div>
          </div>
        </div>
      </div>

      <hr />

      <!-- Comments -->
      <div class="container align-items-center mb-4">
        <div class="row">
          <div class="col col-12">
            <h3 class="text-center m-4">Comments</h3>
          </div>
          <div class="col col-sm-8 mx-auto form-floating">
            <textarea class="form-control" type="text" placeholder="Comments" id="comments" name="comments"
              style="height: 100px;"></textarea>
          </div>
        </div>
      </div>


      <!-- Submit Section -->
      <div class="row">
        <div class="col col-12 text-center">
          <button type="reset" class="btn btn-light m-2">Reset Form</button>
          <a class="btn btn-outline-dark m-2" href="/companies" role="button">Cancel</a>
          <button type="submit" class="btn btn-primary m-2">Submit</button>
        </div>
      </div>
    </form>
  </div>

  <hr />

  <!-- footer -->
  <%- include('partials/__footer') %>

  <!-- <script src=" js/main.js"></script> -->
  <!-- JavaScript Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
    crossorigin="anonymous"></script>
  <!-- Imperatively set the value of the textarea to the comment data retrieved from the server since textarea elements have no value attribute. -->
  <script>
    document.getElementById('comments').value = "<%= company.comments %>"
  </script>
</body>

</html>